<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head>
  <title>user List</title>
  <link rel="stylesheet" th:href="@{/css/custom.css}" />
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" />


</head>

<body>

<div th:replace="fragments/header :: myHeader"></div>

  <div class="container border mt-5">


  <form id="regForm" th:action="@{/regformSub}" th:object="${regDto}" method="post"  novalidate>
  <div class="mb-3">
    <label>Name</label>
    <input type="text" th:field="*{name}" class="form-control" required minlength="2" maxlength="50" />
    <div class="invalid-feedback">
      Please enter your name (2-50 characters).
    </div>
  </div>

  <div class="mb-3">
    <label>Email</label>
    <input type="email" th:field="*{email}" class="form-control" required
      pattern="^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$" autocomplete="off"/>
    <div class="invalid-feedback">
      Please enter a valid email address.
    </div>
  </div>

  <div class="mb-3">
    <label>Password</label>
    <input type="password" th:field="*{user_pwd}" class="form-control" required minlength="6" />
    <div class="invalid-feedback">
      Password must be at least 6 characters.
    </div>
  </div>

  <div class="mb-3">
    <label>Confirm Password</label>
    <input type="password" id="confirmPwd" class="form-control" required />
    <div class="invalid-feedback" id="confirmPwdFeedback">
      Passwords must match.
    </div>
  </div>

  <button type="submit" class="btn btn-primary">Submit</button>
</form>

  </div>
</body>


<script>
  function togglePassword() {
    const passwordInput = document.getElementById("user_pwd");
    const type = passwordInput.getAttribute("type");

    if (type === "password") {
      passwordInput.setAttribute("type", "text");
    } else {
      passwordInput.setAttribute("type", "password");
    }
  }







//like document .ready function
  (() => {
    const form = document.getElementById('regForm');
    const confirmPwdInput = document.getElementById('confirmPwd');
    const confirmPwdFeedback = document.getElementById('confirmPwdFeedback');

    form.addEventListener('submit', function (event) {
      // Reset confirm password validation
      confirmPwdInput.classList.remove('is-invalid');
      confirmPwdFeedback.style.display = 'none';

      // Check confirm password matches password
      const pwd = form.querySelector('input[name="user_pwd"]').value;
      const confirmPwd = confirmPwdInput.value;

      if (confirmPwd !== pwd) {
        event.preventDefault();
        event.stopPropagation();

        confirmPwdInput.classList.add('is-invalid');
        confirmPwdFeedback.style.display = 'block';
      }

      if (!form.checkValidity()) {
        event.preventDefault();
        event.stopPropagation();
      }

      form.classList.add('was-validated');
    }, false);
  })();





  
</script>

</html>